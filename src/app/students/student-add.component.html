<div class="card-header">
    <h5>{{title}}</h5>
</div>
<div class="card-body">
    <form novalidate (ngSubmit)="save()" [formGroup]="studentForm">

        <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="firstNameId">First Name</label>
            <div class="col-md-8">
                <input class="form-control" id="firstNameId" type="text" placeholder="First Name "
                    formControlName="firstName" [ngClass]="{'is-invalid': (studentForm.get('firstName')?.touched ||
                                            studentForm.get('firstName')?.dirty) &&
                                            !studentForm.get('firstName')?.valid }" />
                <span class="invalid-feedback">
                    <span *ngIf="studentForm.get('firstName')?.errors?.required">
                        Please enter your first name.
                    </span>
                    <span *ngIf="studentForm.get('firstName')?.errors?.minlength">
                        The first name must be longer than 3 characters.
                    </span>
                </span>
            </div>
        </div>

        <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="lastNameId">Last Name</label>
            <div class="col-md-8">
                <input class="form-control" id="lastNameId" type="text" placeholder="Last Name "
                    formControlName="lastName" [ngClass]="{'is-invalid': (studentForm.get('lastName')?.touched ||
                                            studentForm.get('lastName')?.dirty) &&
                                            !studentForm.get('lastName')?.valid }" />
                <span class="invalid-feedback">
                    <span *ngIf="studentForm.get('lastName')?.errors?.required">
                        Please enter your last name.
                    </span>
                    <span *ngIf="studentForm.get('lastName')?.errors?.maxlength">
                        The last name must be less than 50 characters.
                    </span>
                </span>
            </div>
        </div>

        <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="formNoId">Form No.</label>
            <div class="col-md-8">
                <input class="form-control" id="formNoId" type="text" placeholder="Form No. " formControlName="formNo"
                    [ngClass]="{'is-invalid': (studentForm.get('formNo')?.touched ||
                                            studentForm.get('formNo')?.dirty) &&
                                            !studentForm.get('formNo')?.valid }" />
                <span class="invalid-feedback">
                    <span *ngIf="studentForm.get('formNo')?.errors?.required">
                        Please enter form no.
                    </span>
                </span>
            </div>
        </div>

        <div formGroupName="emailGroup">
            <div class="form-group row mb-2">
                <label class="col-md-2 col-form-label" for="emailId">Email</label>
                <div class="col-md-8">
                    <input class="form-control" id="emailId" type="text" placeholder="Email " formControlName="email"
                        [ngClass]="{'is-invalid': emailMessage }" />
                    <span class="invalid-feedback">
                        {{ emailMessage }}
                    </span>
                </div>
            </div>

            <div class="form-group row mb-2">
                <label class="col-md-2 col-form-label" for="confirmEmailId">Confirm Email </label>
                <div class="col-md-8">
                    <input class="form-control" id="confirmEmailId" type="text" placeholder="Confirm Email"
                        formControlName="confirmEmail" [ngClass]="{'is-invalid': studentForm.get('emailGroup')?.errors ||
                                            ((studentForm.get('emailGroup.confirmEmail')?.touched ||
                                            studentForm.get('emailGroup.confirmEmail')?.dirty) &&
                                            !studentForm.get('emailGroup.confirmEmail')?.valid) }" />
                    <span class="invalid-feedback">
                        <span *ngIf="studentForm.get('emailGroup.confirmEmail')?.errors?.required">
                            Please enter confirm email address
                        </span>
                        <span *ngIf="studentForm.get('emailGroup')?.errors?.match">
                            The confirmation does not match the email address
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="courseId">Course</label>
            <div class="col-md-8">
                <select class="form-control" id="courseId" formControlName="course" [ngClass]="{'is-invalid': (studentForm.get('course')?.touched ||
                                            studentForm.get('course')?.dirty) &&
                                            !studentForm.get('course')?.valid }">
                    <option value="" disabled selected hidden>Select a Course...</option>
                    <option value="MCA">MCA</option>
                    <option value="BCA">BCA</option>
                    <option value="MBA">MBA</option>
                </select>
                <!-- <input class="form-control" id="courseId" type="text" placeholder="Course " formControlName="course"
                    [ngClass]="{'is-invalid': (studentForm.get('course')?.touched ||
                                            studentForm.get('course')?.dirty) &&
                                            !studentForm.get('course')?.valid }" /> -->
                <span class="invalid-feedback">
                    <span *ngIf="studentForm.get('course')?.errors?.required">
                        Please select course
                    </span>
                </span>
            </div>
        </div>

        <div class="form-group row mb-2">
            <div class="offset-md-2 col-md-4">
                <button class="btn btn-primary mr-3" type="submit" style="width:80px"
                    [title]="studentForm.valid ? 'Save your entered data' : 'Disabled until the form data is valid'"
                    [disabled]="!studentForm.valid">
                    <span class="fa fa-save"></span> Save
                </button>
                <a routerLink="/students" class="btn btn-dark pull-right">
                   <span class="fa fa-remove"></span> Cancel
                </a>
            </div>
        </div>

    </form>
    <!-- <br>Value: {{ studentForm.value | json }} -->
</div>